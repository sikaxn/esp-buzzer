{% extends "base.html" %}

{% block title %}Projector{% endblock %}

{% block content %}
<div id="projector-container" style="
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
">
<svg id="projectorSVG"
     viewBox="0 0 1920 1080"
     preserveAspectRatio="none"
     width="100%"
     height="100%"
     xmlns="http://www.w3.org/2000/svg">

    <defs>
      <pattern id="grid" width="120" height="120" patternUnits="userSpaceOnUse">
        <path d="M 120 0 H 0 V 120" fill="none" stroke="#2e90c9" stroke-width="2"/>
      </pattern>

      <style>
        .qmark {
          font-family: sans-serif;
          font-weight: bold;
          dominant-baseline: middle;
          text-anchor: middle;
          opacity: 0;
          transition: opacity 0.6s ease;
        }
        .qmark.visible {
          opacity: 1;
          animation: float 3s ease-in-out infinite;
        }
        @keyframes float {
          0%   { transform: translateY(0px); }
          50%  { transform: translateY(-20px); }
          100% { transform: translateY(0px); }
        }
        #winnerDisplay, #winnerButton, #awaitingText {
          font-family: sans-serif;
          font-weight: bold;
          text-anchor: middle;
          dominant-baseline: middle;
          opacity: 0;
          transition: opacity 0.5s ease;
        }
        #winnerDisplay.visible, #winnerButton.visible, #awaitingText.visible {
          opacity: 1;
        }
        #winnerDisplay {
          fill: white;
          font-size: 120px;
        }
        #winnerButton {
          fill: #ffffffcc;
          font-size: 72px;
        }
        #awaitingText {
          fill: #ffffffcc;
          font-size: 72px;
        }
      </style>
    </defs>

    <!-- Background -->
    <rect width="100%" height="100%" fill="#12527a" />
    <rect width="100%" height="100%" fill="url(#grid)" />

    <!-- Question Marks -->
    <g id="qGroup">
      <g transform="rotate(-15 400 300)"><text x="400" y="300" font-size="360" fill="#4fb4ff" class="qmark">?</text></g>
      <g transform="rotate(10 800 250)"><text x="800" y="250" font-size="400" fill="#2c88c9" opacity="0.75" class="qmark">?</text></g>
      <g transform="rotate(-8 1400 400)"><text x="1400" y="400" font-size="380" fill="#4fb4ff" opacity="0.6" class="qmark">?</text></g>
      <g transform="rotate(12 600 700)"><text x="600" y="700" font-size="350" fill="#4fb4ff" opacity="0.45" class="qmark">?</text></g>
      <g transform="rotate(-20 1000 800)"><text x="1000" y="800" font-size="420" fill="#2c88c9" opacity="0.85" class="qmark">?</text></g>
      <g transform="rotate(15 1600 300)"><text x="1600" y="300" font-size="390" fill="#4fb4ff" opacity="0.5" class="qmark">?</text></g>
      <g transform="rotate(-10 300 900)"><text x="300" y="900" font-size="360" fill="#4fb4ff" opacity="0.35" class="qmark">?</text></g>
      <g transform="rotate(18 1700 700)"><text x="1700" y="700" font-size="370" fill="#2c88c9" opacity="0.6" class="qmark">?</text></g>
    </g>

    <!-- Winner and Awaiting Display -->
    <text id="winnerDisplay" x="960" y="540"></text>
    <text id="winnerButton" x="960" y="650"></text>
    <text id="awaitingText" x="960" y="1000">Awaiting Answer...</text>
  </svg>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='howler.min.js') }}"></script>
<script src="{{ url_for('static', filename='projector.js') }}"></script>


{% endblock %}
